<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/x-icon" sizes="128x128" href="/favicon.ico"><title>Linux | Vbeats</title><meta name="description" content="Good Good Study ğŸ‘ Day Day UP">
    <link rel="modulepreload" href="/assets/app.44dda959.js"><link rel="modulepreload" href="/assets/linux.html.9fc5fb1a.js"><link rel="modulepreload" href="/assets/linux.html.ed838834.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.b29aeafa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.jpg" alt="Vbeats"><span class="site-name can-hide">Vbeats</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/base/" class="router-link-active" aria-label="æ‚è®°"><!--[--><!--]--> æ‚è®° <!--[--><!--]--></a></div><div class="navbar-item"><a href="/backend/" class="" aria-label="åç«¯"><!--[--><!--]--> åç«¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontend/" class="" aria-label="å‰ç«¯ğŸ‘½"><!--[--><!--]--> å‰ç«¯ğŸ‘½ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/cloud/" class="" aria-label="äº‘â˜ï¸"><!--[--><!--]--> äº‘â˜ï¸ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/arch/" class="" aria-label="æ¶æ„ğŸ¥"><!--[--><!--]--> æ¶æ„ğŸ¥ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/data/" class="" aria-label="æ•°æ®å¤„ç†"><!--[--><!--]--> æ•°æ®å¤„ç† <!--[--><!--]--></a></div><div class="navbar-item"><a href="/datav/" class="" aria-label="æ•°æ®å¯è§†åŒ–"><!--[--><!--]--> æ•°æ®å¯è§†åŒ– <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/" class="" aria-label="é…ç½®"><!--[--><!--]--> é…ç½® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/" class="" aria-label="å…¶å®ƒèµ„æº"><!--[--><!--]--> å…¶å®ƒèµ„æº <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/boot-vue" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="æŒ‰ä¸‹ / æœç´¢" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/base/" class="router-link-active" aria-label="æ‚è®°"><!--[--><!--]--> æ‚è®° <!--[--><!--]--></a></div><div class="navbar-item"><a href="/backend/" class="" aria-label="åç«¯"><!--[--><!--]--> åç«¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontend/" class="" aria-label="å‰ç«¯ğŸ‘½"><!--[--><!--]--> å‰ç«¯ğŸ‘½ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/cloud/" class="" aria-label="äº‘â˜ï¸"><!--[--><!--]--> äº‘â˜ï¸ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/arch/" class="" aria-label="æ¶æ„ğŸ¥"><!--[--><!--]--> æ¶æ„ğŸ¥ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/data/" class="" aria-label="æ•°æ®å¤„ç†"><!--[--><!--]--> æ•°æ®å¤„ç† <!--[--><!--]--></a></div><div class="navbar-item"><a href="/datav/" class="" aria-label="æ•°æ®å¯è§†åŒ–"><!--[--><!--]--> æ•°æ®å¯è§†åŒ– <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/" class="" aria-label="é…ç½®"><!--[--><!--]--> é…ç½® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/" class="" aria-label="å…¶å®ƒèµ„æº"><!--[--><!--]--> å…¶å®ƒèµ„æº <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/boot-vue" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">åŸºç¡€ <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/base/base/shell.html" class="sidebar-item" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/base/base/linux.html#lvm-ç£ç›˜ç®¡ç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="LVM ç£ç›˜ç®¡ç†"><!--[--><!--]--> LVM ç£ç›˜ç®¡ç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#å†…æ ¸å‚æ•°ä¼˜åŒ–" class="router-link-active router-link-exact-active sidebar-item" aria-label="å†…æ ¸å‚æ•°ä¼˜åŒ–"><!--[--><!--]--> å†…æ ¸å‚æ•°ä¼˜åŒ– <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#systemctl-æœåŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="systemctl æœåŠ¡"><!--[--><!--]--> systemctl æœåŠ¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#rsync-åŒæ­¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="rsync åŒæ­¥"><!--[--><!--]--> rsync åŒæ­¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#zsh" class="router-link-active router-link-exact-active sidebar-item" aria-label="zsh"><!--[--><!--]--> zsh <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#vim" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#dash" class="router-link-active router-link-exact-active sidebar-item" aria-label="dash"><!--[--><!--]--> dash <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#root-ç”¨æˆ·" class="router-link-active router-link-exact-active sidebar-item" aria-label="root ç”¨æˆ·"><!--[--><!--]--> root ç”¨æˆ· <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/base/base/linux.html#ansible" class="router-link-active router-link-exact-active sidebar-item" aria-label="ansible"><!--[--><!--]--> ansible <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/base/base/linux.html#playbook" class="router-link-active router-link-exact-active sidebar-item" aria-label="playbook"><!--[--><!--]--> playbook <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/base/base/nginx.html" class="sidebar-item" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a><!----></li><li><a href="/base/base/configuration.html" class="sidebar-item" aria-label="å¸¸ç”¨é…ç½®"><!--[--><!--]--> å¸¸ç”¨é…ç½® <!--[--><!--]--></a><!----></li><li><a href="/base/base/proxy.html" class="sidebar-item" aria-label="HaProxy"><!--[--><!--]--> HaProxy <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">æ–‡ç«  <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/base/article/clash.html" class="sidebar-item" aria-label="Clash"><!--[--><!--]--> Clash <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="linux" tabindex="-1"><a class="header-anchor" href="#linux" aria-hidden="true">#</a> Linux</h1><h2 id="lvm-ç£ç›˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#lvm-ç£ç›˜ç®¡ç†" aria-hidden="true">#</a> LVM ç£ç›˜ç®¡ç†</h2><blockquote><p>ç‰©ç†ç¡¬ç›˜ --&gt; ç‰©ç†å· PV --&gt; å·ç»„ VG --&gt; é€»è¾‘å· LV --&gt; æŒ‚è½½</p></blockquote><p><img src="/assets/lvm.791202ed.png" alt="LVM"></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># gpt åˆ†åŒº</span>
gdisk /dev/sdn

<span class="token comment"># ...</span>
partprobe <span class="token comment"># åˆ·æ–°åˆ†åŒºè¡¨</span>

<span class="token comment"># åˆ›å»ºPVå·</span>

pvcreate /dev/sdn /dev/sdx

<span class="token comment"># å·ç»„</span>

vgcreate -s 32M xxx /dev/sdn  <span class="token comment"># -s PEæœ€å°å—å¤§å°  4Mæ•´æ•°å€</span>

<span class="token comment"># å·²æœ‰vgroup å¢åŠ ä¸€å—  pv</span>
vgextend xxx  /dev/sdb

<span class="token comment"># é€»è¾‘å·</span>

lvcreate -L 15G -n xxxx1  xxx<span class="token punctuation">(</span>vg name<span class="token punctuation">)</span> <span class="token comment"># -L å®¹é‡å¤§å°</span>

<span class="token comment"># æ ¼å¼åŒ–é€»è¾‘å·</span>

mkfs.ext4 /dev/xxx/xxxx1   <span class="token comment"># /devç›®å½•ä¸‹ä¼šå­˜åœ¨  å·ç»„å/é€»è¾‘å·åçš„è·¯å¾„</span>

<span class="token comment"># æŒ‚è½½ /dev/xxx/xxxx1 åˆ°å…·ä½“ç›®å½•ä¸Š</span>

<span class="token comment"># è‡ªåŠ¨æŒ‚è½½ /etc/fstab å¢åŠ </span>
/dev/xxx/xxxx1 /data       ext4    defaults       <span class="token number">0</span>       <span class="token number">0</span>


<span class="token comment"># æ‰©å±•/ç¼©å°é€»è¾‘å·</span>
lvextend -L +50G /dev/xxx/xxxx1   <span class="token comment"># å¢åŠ 50G</span>
lvreduce -L -50G /dev/xxx/xxxx1   <span class="token comment"># å‡å°50G</span>

lvextend -r -l +100%FREE /dev/xxx/xxxx1  <span class="token comment"># åˆ†é…vgå‰©ä½™æ‰€æœ‰ç©ºé—´  -r åˆ·æ–°æ–‡ä»¶ç³»ç»Ÿå¤§å°</span>

<span class="token comment"># æ›´æ–°</span>
resize2fs /dev/xxx/xxxx1  <span class="token comment"># etxæ ¼å¼</span>
xfs_growfs /dev/xxx/xxx1  <span class="token comment"># xfsæ ¼å¼</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="å†…æ ¸å‚æ•°ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å†…æ ¸å‚æ•°ä¼˜åŒ–" aria-hidden="true">#</a> å†…æ ¸å‚æ•°ä¼˜åŒ–</h2><p><code>/etc/sysctl.conf</code> å†…æ ¸å‚æ•°</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vm.swappiness<span class="token operator">=</span><span class="token number">0</span>
net.ipv4.ip_forward<span class="token operator">=</span><span class="token number">1</span>
net.ipv4.tcp_syncookies <span class="token operator">=</span> <span class="token number">1</span>
net.ipv4.tcp_tw_reuse <span class="token operator">=</span> <span class="token number">1</span>
net.ipv4.tcp_tw_recycle <span class="token operator">=</span> <span class="token number">1</span>
net.ipv4.tcp_fin_timeout <span class="token operator">=</span> <span class="token number">30</span>
net.ipv4.tcp_keepalive_time <span class="token operator">=</span> <span class="token number">1200</span>
net.ipv4.tcp_max_syn_backlog <span class="token operator">=</span> <span class="token number">8192</span>
net.ipv4.tcp_max_tw_buckets <span class="token operator">=</span> <span class="token number">5000</span>

<span class="token comment"># net.ipv4.tcp_syncookies = 1è¡¨ç¤ºå¼€å¯SYN Cookiesã€‚å½“å‡ºç°SYNç­‰å¾…é˜Ÿåˆ—æº¢å‡ºæ—¶ï¼Œå¯ç”¨cookiesæ¥å¤„ç†ï¼Œå¯é˜²èŒƒå°‘é‡SYNæ”»å‡»ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ï¼›</span>

<span class="token comment"># net.ipv4.tcp_tw_reuse = 1 è¡¨ç¤ºå¼€å¯é‡ç”¨ã€‚å…è®¸å°†TIME-WAIT socketsé‡æ–°ç”¨äºæ–°çš„TCPè¿æ¥ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ï¼›</span>

<span class="token comment"># net.ipv4.tcp_tw_recycle = 1 è¡¨ç¤ºå¼€å¯TCPè¿æ¥ä¸­TIME-WAIT socketsçš„å¿«é€Ÿå›æ”¶ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ã€‚</span>

<span class="token comment"># net.ipv4.tcp_fin_timeout = 30 è¡¨ç¤ºå¦‚æœå¥—æ¥å­—ç”±æœ¬ç«¯è¦æ±‚å…³é—­ï¼Œè¿™ä¸ªå‚æ•°å†³å®šäº†å®ƒä¿æŒåœ¨FIN-WAIT-2çŠ¶æ€çš„æ—¶é—´ã€‚é»˜è®¤æ˜¯60sã€‚</span>

<span class="token comment"># net.ipv4.tcp_keepalive_time = 1200 è¡¨ç¤ºå½“keepaliveèµ·ç”¨çš„æ—¶å€™ï¼ŒTCPå‘é€keepaliveæ¶ˆæ¯çš„é¢‘åº¦ã€‚ç¼ºçœæ˜¯2å°æ—¶ï¼Œæ”¹ä¸º20åˆ†é’Ÿã€‚</span>

<span class="token comment"># net.ipv4.ip_local_port_range = 1024 65000 è¡¨ç¤ºç”¨äºå‘å¤–è¿æ¥çš„ç«¯å£èŒƒå›´ã€‚ç¼ºçœæƒ…å†µä¸‹å¾ˆå°ï¼š32768åˆ°61000ï¼Œæ”¹ä¸º1024åˆ°65000ã€‚</span>

<span class="token comment"># net.ipv4.tcp_max_syn_backlog = 8192 è¡¨ç¤ºSYNé˜Ÿåˆ—çš„é•¿åº¦ï¼Œé»˜è®¤ä¸º1024ï¼ŒåŠ å¤§é˜Ÿåˆ—é•¿åº¦ä¸º8192ï¼Œå¯ä»¥å®¹çº³æ›´å¤šç­‰å¾…è¿æ¥çš„ç½‘ç»œè¿æ¥æ•°ã€‚</span>

<span class="token comment"># net.ipv4.tcp_max_tw_buckets = 5000è¡¨ç¤ºç³»ç»ŸåŒæ—¶ä¿æŒTIME_WAITå¥—æ¥å­—çš„æœ€å¤§æ•°é‡ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼ŒTIME_WAITå¥—æ¥å­—å°†ç«‹åˆ»è¢«æ¸…é™¤å¹¶æ‰“å°è­¦å‘Šä¿¡æ¯ã€‚é»˜è®¤ä¸º180000ï¼Œæ”¹ä¸º5000ã€‚</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><code>/etc/security/limits.conf</code> æ–‡ä»¶æ‰“å¼€å¥æŸ„é™åˆ¶</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>* soft nofile <span class="token number">65535</span>
* hard nofile <span class="token number">65535</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="systemctl-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#systemctl-æœåŠ¡" aria-hidden="true">#</a> systemctl æœåŠ¡</h2><blockquote><p>/usr/lib/systemd/ä¸‹, å¼€æœºä¸ç™»å½•å°±èƒ½å¯åŠ¨çš„æœåŠ¡æœ€å¥½æ”¾åœ¨ /usr/lib/systemd/system ç³»ç»ŸæœåŠ¡, .../user: ç”¨æˆ·æœåŠ¡ éœ€è¦ç”¨æˆ·ç™»å½•æ‰å¯ä»¥å¯åŠ¨</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># [Unit]ã€[Service]å’Œ[Install]</span>
<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>   <span class="token comment"># ä¸»è¦æ˜¯æœåŠ¡è¯´æ˜</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>test   <span class="token comment"># ç®€å•æè¿°æœåŠ¡</span>
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target    <span class="token comment"># æè¿°æœåŠ¡ç±»åˆ«ï¼Œè¡¨ç¤ºæœ¬æœåŠ¡éœ€è¦åœ¨networkæœåŠ¡å¯åŠ¨ååœ¨å¯åŠ¨</span>
<span class="token assign-left variable">Before</span><span class="token operator">=</span>xxx.service      <span class="token comment"># è¡¨ç¤ºéœ€è¦åœ¨æŸäº›æœåŠ¡å¯åŠ¨ä¹‹å‰å¯åŠ¨ï¼ŒAfterå’ŒBeforeå­—æ®µåªæ¶‰åŠå¯åŠ¨é¡ºåºï¼Œä¸æ¶‰åŠä¾èµ–å…³ç³»</span>

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>  <span class="token comment"># æ ¸å¿ƒåŒºåŸŸ</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking     <span class="token comment"># è¡¨ç¤ºåå°è¿è¡Œæ¨¡å¼ã€‚</span>
<span class="token assign-left variable">User</span><span class="token operator">=</span>root        <span class="token comment"># è®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·</span>
<span class="token assign-left variable">Group</span><span class="token operator">=</span>root       <span class="token comment"># è®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·ç»„</span>
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>control-group   <span class="token comment"># å®šä¹‰systemdå¦‚ä½•åœæ­¢æœåŠ¡</span>
<span class="token assign-left variable">PIDFile</span><span class="token operator">=</span>/usr/local/test/test.pid    <span class="token comment"># å­˜æ”¾PIDçš„ç»å¯¹è·¯å¾„</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>no        <span class="token comment"># å®šä¹‰æœåŠ¡è¿›ç¨‹é€€å‡ºåï¼Œsystemdçš„é‡å¯æ–¹å¼ï¼Œé»˜è®¤æ˜¯ä¸é‡å¯</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/test/bin/startup.sh    <span class="token comment"># æœåŠ¡å¯åŠ¨å‘½ä»¤ï¼Œå‘½ä»¤éœ€è¦ç»å¯¹è·¯å¾„</span>
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/xxxxx
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/xxxxx
<span class="token assign-left variable">PrivateTmp</span><span class="token operator">=</span>true                               <span class="token comment"># è¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´</span>

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target  <span class="token comment"># å¤šç”¨æˆ·</span>

<span class="token comment">#Typeçš„ç±»å‹æœ‰ï¼š</span>
<span class="token comment">#    simple(é»˜è®¤ï¼‰ï¼š# ä»¥ExecStartå­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹</span>
<span class="token comment">#    forking:  # ExecStartå­—æ®µä»¥fork()æ–¹å¼å¯åŠ¨ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹å°†é€€å‡ºï¼Œå­è¿›ç¨‹å°†æˆä¸ºä¸»è¿›ç¨‹ï¼ˆåå°è¿è¡Œï¼‰ã€‚ä¸€èˆ¬éƒ½è®¾ç½®ä¸ºforking</span>
<span class="token comment">#    oneshot:  # ç±»ä¼¼äºsimpleï¼Œä½†åªæ‰§è¡Œä¸€æ¬¡ï¼Œsystemdä¼šç­‰å®ƒæ‰§è¡Œå®Œï¼Œæ‰å¯åŠ¨å…¶ä»–æœåŠ¡</span>
<span class="token comment">#    dbusï¼š    # ç±»ä¼¼äºsimple, ä½†ä¼šç­‰å¾…D-Busä¿¡å·åå¯åŠ¨</span>
<span class="token comment">#    notify:   # ç±»ä¼¼äºsimple, å¯åŠ¨ç»“æŸåä¼šå‘å‡ºé€šçŸ¥ä¿¡å·ï¼Œç„¶åsystemdå†å¯åŠ¨å…¶ä»–æœåŠ¡</span>
<span class="token comment">#    idleï¼š    # ç±»ä¼¼äºsimpleï¼Œä½†æ˜¯è¦ç­‰åˆ°å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¯åŠ¨è¯¥æœåŠ¡ã€‚</span>
<span class="token comment">#</span>
<span class="token comment">#EnvironmentFile:</span>
<span class="token comment">#    æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå’Œè¿è¯å·ç»„åˆä½¿ç”¨ï¼Œå¯ä»¥é¿å…é…ç½®æ–‡ä»¶ä¸å­˜åœ¨çš„å¼‚å¸¸ã€‚</span>
<span class="token comment">#</span>
<span class="token comment">#Environment:</span>
<span class="token comment">#    åé¢æ¥å¤šä¸ªä¸åŒçš„shellå˜é‡ã€‚</span>
<span class="token comment">#    ä¾‹å¦‚ï¼š</span>
<span class="token comment">#    Environment=DATA_DIR=/data/elk</span>
<span class="token comment">#    Environment=LOG_DIR=/var/log/elasticsearch</span>
<span class="token comment">#    Environment=PID_DIR=/var/run/elasticsearch</span>
<span class="token comment">#    EnvironmentFile=-/etc/sysconfig/elasticsearch</span>
<span class="token comment">#</span>
<span class="token comment">#è¿è¯å·ï¼ˆ-ï¼‰ï¼šåœ¨æ‰€æœ‰å¯åŠ¨è®¾ç½®ä¹‹å‰ï¼Œæ·»åŠ çš„å˜é‡å­—æ®µï¼Œéƒ½å¯ä»¥åŠ ä¸Šè¿è¯å·</span>
<span class="token comment">#    è¡¨ç¤ºæŠ‘åˆ¶é”™è¯¯ï¼Œå³å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚</span>
<span class="token comment">#    æ¯”å¦‚`EnviromentFile=-/etc/sysconfig/xxx` è¡¨ç¤ºå³ä½¿æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ›å¼‚å¸¸</span>
<span class="token comment">#</span>
<span class="token comment">#KillModeçš„ç±»å‹ï¼š</span>
<span class="token comment">#    control-group(é»˜è®¤)ï¼š# å½“å‰æ§åˆ¶ç»„é‡Œçš„æ‰€æœ‰å­è¿›ç¨‹ï¼Œéƒ½ä¼šè¢«æ€æ‰</span>
<span class="token comment">#    process: # åªæ€ä¸»è¿›ç¨‹</span>
<span class="token comment">#    mixed:   # ä¸»è¿›ç¨‹å°†æ”¶åˆ°SIGTERMä¿¡å·ï¼Œå­è¿›ç¨‹æ”¶åˆ°SIGKILLä¿¡å·</span>
<span class="token comment">#    none:    # æ²¡æœ‰è¿›ç¨‹ä¼šè¢«æ€æ‰ï¼Œåªæ˜¯æ‰§è¡ŒæœåŠ¡çš„stopå‘½ä»¤</span>
<span class="token comment">#Restartçš„ç±»å‹ï¼š</span>
<span class="token comment">#    no(é»˜è®¤å€¼)ï¼š # é€€å‡ºåæ— æ“ä½œ</span>
<span class="token comment">#    on-success:  # åªæœ‰æ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç ä¸º0ï¼‰,æ‰ä¼šé‡å¯</span>
<span class="token comment">#    on-failure:  # éæ­£å¸¸é€€å‡ºæ—¶ï¼Œé‡å¯ï¼ŒåŒ…æ‹¬è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ç­‰</span>
<span class="token comment">#    on-abnormal: # åªæœ‰è¢«ä¿¡å·ç»ˆæ­¢æˆ–è¶…æ—¶ï¼Œæ‰ä¼šé‡å¯</span>
<span class="token comment">#    on-abort:    # åªæœ‰åœ¨æ”¶åˆ°æ²¡æœ‰æ•æ‰åˆ°çš„ä¿¡å·ç»ˆæ­¢æ—¶ï¼Œæ‰ä¼šé‡å¯</span>
<span class="token comment">#    on-watchdog: # è¶…æ—¶é€€å‡ºæ—¶ï¼Œæ‰ä¼šé‡å¯</span>
<span class="token comment">#    always:      # ä¸ç®¡ä»€ä¹ˆé€€å‡ºåŸå› ï¼Œéƒ½ä¼šé‡å¯</span>
<span class="token comment">#    # å¯¹äºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ¨èç”¨on-failure</span>
<span class="token comment">#RestartSecå­—æ®µï¼š</span>
<span class="token comment">#    è¡¨ç¤ºsystemdé‡å¯æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦ç­‰å¾…çš„ç§’æ•°ï¼šRestartSec: 30</span>
<span class="token comment">#</span>
<span class="token comment">#å„ç§Exec*å­—æ®µï¼š</span>
<span class="token comment">#    # Exec* åé¢æ¥çš„å‘½ä»¤ï¼Œä»…æ¥å—â€œæŒ‡ä»¤ å‚æ•° å‚æ•°..â€æ ¼å¼ï¼Œä¸èƒ½æ¥å—&lt;&gt;|&amp;ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¾ˆå¤šbashè¯­æ³•ä¹Ÿä¸æ”¯æŒã€‚å¦‚æœæƒ³æ”¯æŒbashè¯­æ³•ï¼Œéœ€è¦è®¾ç½®Tyep=oneshot</span>
<span class="token comment">#    ExecStartï¼š    # å¯åŠ¨æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token comment">#    ExecReloadï¼š   # é‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token comment">#    ExecStopï¼š     # åœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token comment">#    ExecStartPreï¼š # å¯åŠ¨æœåŠ¡å‰æ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token comment">#    ExecStartPostï¼š# å¯åŠ¨æœåŠ¡åæ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token comment">#    ExecStopPostï¼š # åœæ­¢æœåŠ¡åæ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token comment">#</span>
<span class="token comment">#</span>
<span class="token comment">#WantedByå­—æ®µï¼š</span>
<span class="token comment">#    multi-user.target: # è¡¨ç¤ºå¤šç”¨æˆ·å‘½ä»¤è¡ŒçŠ¶æ€ï¼Œè¿™ä¸ªè®¾ç½®å¾ˆé‡è¦</span>
<span class="token comment">#    graphical.target:  # è¡¨ç¤ºå›¾å½¢ç”¨æˆ·çŠ¶ä½“ï¼Œå®ƒä¾èµ–äºmulti-user.target</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h2 id="rsync-åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#rsync-åŒæ­¥" aria-hidden="true">#</a> rsync åŒæ­¥</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># è¿œç¨‹ ----&gt; æœ¬åœ°  root@xxx:/xxx  /home.....</span>
<span class="token function">rsync</span> -arPu --exclude <span class="token string">&#39;demo1/&#39;</span> --exclude <span class="token string">&#39;demo2/&#39;</span> --exclude <span class="token string">&#39;demo3/&#39;</span> root@202.60.245.163:/root/test /root

-v, --verbose è¯¦ç»†æ¨¡å¼è¾“å‡º
-q, --quiet ç²¾ç®€è¾“å‡ºæ¨¡å¼
-c, --checksum æ‰“å¼€æ ¡éªŒå¼€å…³ï¼Œå¼ºåˆ¶å¯¹æ–‡ä»¶ä¼ è¾“è¿›è¡Œæ ¡éªŒ
-a, --archive å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¿æŒæ‰€æœ‰æ–‡ä»¶å±æ€§ï¼Œç­‰äº-rlptgoD
-r, --recursive å¯¹å­ç›®å½•ä»¥é€’å½’æ¨¡å¼å¤„ç†
-R, --relative ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¿¡æ¯
-b, --backup åˆ›å»ºå¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯å¯¹äºç›®çš„å·²ç»å­˜åœ¨æœ‰åŒæ ·çš„æ–‡ä»¶åæ—¶ï¼Œå°†è€çš„æ–‡ä»¶é‡æ–°å‘½åä¸º~filenameã€‚å¯ä»¥ä½¿ç”¨--suffixé€‰é¡¹æ¥æŒ‡å®šä¸åŒçš„å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚
--backup-dir å°†å¤‡ä»½æ–‡ä»¶<span class="token punctuation">(</span>å¦‚~filename<span class="token punctuation">)</span>å­˜æ”¾åœ¨åœ¨ç›®å½•ä¸‹ã€‚
-suffix<span class="token operator">=</span>SUFFIX å®šä¹‰å¤‡ä»½æ–‡ä»¶å‰ç¼€
-u, --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äºDSTï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºè¦å¤‡ä»½çš„æ–‡ä»¶ã€‚<span class="token punctuation">(</span>ä¸è¦†ç›–æ›´æ–°çš„æ–‡ä»¶<span class="token punctuation">)</span>
-l, --links ä¿ç•™è½¯é“¾ç»“
-L, --copy-links æƒ³å¯¹å¾…å¸¸è§„æ–‡ä»¶ä¸€æ ·å¤„ç†è½¯é“¾ç»“
--copy-unsafe-links ä»…ä»…æ‹·è´æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“
--safe-links å¿½ç•¥æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“
-H, --hard-links ä¿ç•™ç¡¬é“¾ç»“
-p, --perms ä¿æŒæ–‡ä»¶æƒé™
-o, --owner ä¿æŒæ–‡ä»¶å±ä¸»ä¿¡æ¯
-g, --group ä¿æŒæ–‡ä»¶å±ç»„ä¿¡æ¯
-D, --devices ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯
-t, --times ä¿æŒæ–‡ä»¶æ—¶é—´ä¿¡æ¯
-S, --sparse å¯¹ç¨€ç–æ–‡ä»¶è¿›è¡Œç‰¹æ®Šå¤„ç†ä»¥èŠ‚çœDSTçš„ç©ºé—´
-n, --dry-runç°å®å“ªäº›æ–‡ä»¶å°†è¢«ä¼ è¾“
-W, --whole-file æ‹·è´æ–‡ä»¶ï¼Œä¸è¿›è¡Œå¢é‡æ£€æµ‹
-x, --one-file-system ä¸è¦è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œ
-B, --block-size<span class="token operator">=</span>SIZE æ£€éªŒç®—æ³•ä½¿ç”¨çš„å—å°ºå¯¸ï¼Œé»˜è®¤æ˜¯700å­—èŠ‚
-e, --rsh<span class="token operator">=</span>COMMAND æŒ‡å®šä½¿ç”¨rshã€sshæ–¹å¼è¿›è¡Œæ•°æ®åŒæ­¥
--rsync-path<span class="token operator">=</span><span class="token environment constant">PATH</span> æŒ‡å®šè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„rsyncå‘½ä»¤æ‰€åœ¨è·¯å¾„ä¿¡æ¯
-C, --cvs-exclude ä½¿ç”¨å’ŒCVSä¸€æ ·çš„æ–¹æ³•è‡ªåŠ¨å¿½ç•¥æ–‡ä»¶ï¼Œç”¨æ¥æ’é™¤é‚£äº›ä¸å¸Œæœ›ä¼ è¾“çš„æ–‡ä»¶
--existing ä»…ä»…æ›´æ–°é‚£äº›å·²ç»å­˜åœ¨äºDSTçš„æ–‡ä»¶ï¼Œè€Œä¸å¤‡ä»½é‚£äº›æ–°åˆ›å»ºçš„æ–‡ä»¶
--delete åˆ é™¤é‚£äº›DSTä¸­SRCæ²¡æœ‰çš„æ–‡ä»¶
--delete-excluded åŒæ ·åˆ é™¤æ¥æ”¶ç«¯é‚£äº›è¢«è¯¥é€‰é¡¹æŒ‡å®šæ’é™¤çš„æ–‡ä»¶
--delete-after ä¼ è¾“ç»“æŸä»¥åå†åˆ é™¤
--ignore-errors åŠæ—¶å‡ºç°IOé”™è¯¯ä¹Ÿè¿›è¡Œåˆ é™¤
--max-delete<span class="token operator">=</span>NUM æœ€å¤šåˆ é™¤NUMä¸ªæ–‡ä»¶
--partial ä¿ç•™é‚£äº›å› æ•…æ²¡æœ‰å®Œå…¨ä¼ è¾“çš„æ–‡ä»¶ï¼Œä»¥æ˜¯åŠ å¿«éšåçš„å†æ¬¡ä¼ è¾“
--force å¼ºåˆ¶åˆ é™¤ç›®å½•ï¼Œå³ä½¿ä¸ä¸ºç©º
--numeric-ids ä¸å°†æ•°å­—çš„ç”¨æˆ·å’Œç»„IDåŒ¹é…ä¸ºç”¨æˆ·åå’Œç»„å
--timeout<span class="token operator">=</span>TIME IPè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’
-I, --ignore-times ä¸è·³è¿‡é‚£äº›æœ‰åŒæ ·çš„æ—¶é—´å’Œé•¿åº¦çš„æ–‡ä»¶
--size-only å½“å†³å®šæ˜¯å¦è¦å¤‡ä»½æ–‡ä»¶æ—¶ï¼Œä»…ä»…å¯Ÿçœ‹æ–‡ä»¶å¤§å°è€Œä¸è€ƒè™‘æ–‡ä»¶æ—¶é—´
--modify-window<span class="token operator">=</span>NUM å†³å®šæ–‡ä»¶æ˜¯å¦æ—¶é—´ç›¸åŒæ—¶ä½¿ç”¨çš„æ—¶é—´æˆ³çª—å£ï¼Œé»˜è®¤ä¸º0
-T --temp-dir<span class="token operator">=</span>DIR åœ¨DIRä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶
--compare-dest<span class="token operator">=</span>DIR åŒæ ·æ¯”è¾ƒDIRä¸­çš„æ–‡ä»¶æ¥å†³å®šæ˜¯å¦éœ€è¦å¤‡ä»½
-P ç­‰åŒäº --partial
--progress æ˜¾ç¤ºå¤‡ä»½è¿‡ç¨‹
-z, --compress å¯¹å¤‡ä»½çš„æ–‡ä»¶åœ¨ä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©å¤„ç†
--exclude<span class="token operator">=</span>PATTERN æŒ‡å®šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼
--include<span class="token operator">=</span>PATTERN æŒ‡å®šä¸æ’é™¤è€Œéœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼
--exclude-from<span class="token operator">=</span>FILE æ’é™¤FILEä¸­æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶
--include-from<span class="token operator">=</span>FILE ä¸æ’é™¤FILEæŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶
--version æ‰“å°ç‰ˆæœ¬ä¿¡æ¯
--address ç»‘å®šåˆ°ç‰¹å®šçš„åœ°å€
--config<span class="token operator">=</span>FILE æŒ‡å®šå…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„rsyncd.confæ–‡ä»¶
--port<span class="token operator">=</span>PORT æŒ‡å®šå…¶ä»–çš„rsyncæœåŠ¡ç«¯å£
--blocking-io å¯¹è¿œç¨‹shellä½¿ç”¨é˜»å¡IO
-stats ç»™å‡ºæŸäº›æ–‡ä»¶çš„ä¼ è¾“çŠ¶æ€
--progress åœ¨ä¼ è¾“æ—¶ç°å®ä¼ è¾“è¿‡ç¨‹
--log-format<span class="token operator">=</span>formAT æŒ‡å®šæ—¥å¿—æ–‡ä»¶æ ¼å¼
--password-file<span class="token operator">=</span>FILE ä»FILEä¸­å¾—åˆ°å¯†ç 
--bwlimit<span class="token operator">=</span>KBPS é™åˆ¶I/Oå¸¦å®½ï¼ŒKBytes per second
-h, --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><h2 id="zsh" tabindex="-1"><a class="header-anchor" href="#zsh" aria-hidden="true">#</a> zsh</h2><blockquote><p>home end é”® &amp; å°é”®ç›˜</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># key bindings</span>
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[1~&quot;</span> beginning-of-line
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[4~&quot;</span> end-of-line
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[5~&quot;</span> beginning-of-history
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[6~&quot;</span> end-of-history

<span class="token comment"># for rxvt</span>
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[8~&quot;</span> end-of-line
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[7~&quot;</span> beginning-of-line
<span class="token comment"># for non RH/Debian xterm, can&#39;t hurt for RH/DEbian xterm</span>
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>OH&quot;</span> beginning-of-line
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>OF&quot;</span> end-of-line
<span class="token comment"># for freebsd console</span>
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[H&quot;</span> beginning-of-line
bindkey <span class="token string">&quot;<span class="token entity" title="\e">\e</span>[F&quot;</span> end-of-line
<span class="token comment"># completion in the middle of a line</span>
bindkey <span class="token string">&#39;^i&#39;</span> expand-or-complete-prefix

<span class="token comment"># Fix numeric keypad</span>
<span class="token comment"># 0 . Enter</span>
bindkey -s <span class="token string">&quot;^[Op&quot;</span> <span class="token string">&quot;0&quot;</span>
bindkey -s <span class="token string">&quot;^[On&quot;</span> <span class="token string">&quot;.&quot;</span>
bindkey -s <span class="token string">&quot;^[OM&quot;</span> <span class="token string">&quot;^M&quot;</span>
<span class="token comment"># 1 2 3</span>
bindkey -s <span class="token string">&quot;^[Oq&quot;</span> <span class="token string">&quot;1&quot;</span>
bindkey -s <span class="token string">&quot;^[Or&quot;</span> <span class="token string">&quot;2&quot;</span>
bindkey -s <span class="token string">&quot;^[Os&quot;</span> <span class="token string">&quot;3&quot;</span>
<span class="token comment"># 4 5 6</span>
bindkey -s <span class="token string">&quot;^[Ot&quot;</span> <span class="token string">&quot;4&quot;</span>
bindkey -s <span class="token string">&quot;^[Ou&quot;</span> <span class="token string">&quot;5&quot;</span>
bindkey -s <span class="token string">&quot;^[Ov&quot;</span> <span class="token string">&quot;6&quot;</span>
<span class="token comment"># 7 8 9</span>
bindkey -s <span class="token string">&quot;^[Ow&quot;</span> <span class="token string">&quot;7&quot;</span>
bindkey -s <span class="token string">&quot;^[Ox&quot;</span> <span class="token string">&quot;8&quot;</span>
bindkey -s <span class="token string">&quot;^[Oy&quot;</span> <span class="token string">&quot;9&quot;</span>
<span class="token comment"># + - * /</span>
bindkey -s <span class="token string">&quot;^[Ol&quot;</span> <span class="token string">&quot;+&quot;</span>
bindkey -s <span class="token string">&quot;^[Om&quot;</span> <span class="token string">&quot;-&quot;</span>
bindkey -s <span class="token string">&quot;^[Oj&quot;</span> <span class="token string">&quot;*&quot;</span>
bindkey -s <span class="token string">&quot;^[Oo&quot;</span> <span class="token string">&quot;/&quot;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="vim" tabindex="-1"><a class="header-anchor" href="#vim" aria-hidden="true">#</a> Vim</h2><blockquote><p>.vimrc</p></blockquote><p>æœç´¢é«˜äº® <code>set hlsearch</code></p><h2 id="dash" tabindex="-1"><a class="header-anchor" href="#dash" aria-hidden="true">#</a> dash</h2><p>ubuntu ä¸‹ declare æŠ¥é”™:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> dpkg-reconfigure dash
<span class="token comment"># é€‰å¦  ubuntué»˜è®¤sh æŒ‡å‘äº†dash  é€šè¿‡ä¸Šè¾¹å‘½ä»¤  è§£é™¤dashä¸shçš„å…³è”</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="root-ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#root-ç”¨æˆ·" aria-hidden="true">#</a> root ç”¨æˆ·</h2><p>ä¸º<code>root</code>ç”¨æˆ·è®¾ç½®å¯†ç </p><p><code>ubuntu</code>å¼€å¯<code>root</code>: sshd é…ç½®æ–‡ä»¶ <code>PermitRootLogin yes</code></p><h2 id="ansible" tabindex="-1"><a class="header-anchor" href="#ansible" aria-hidden="true">#</a> ansible</h2><p><code>ansible all -m ping -v</code></p><p>é»˜è®¤æ¨¡å—<code>command</code> æœ‰äº›å‘½ä»¤æ— æ³•æ‰§è¡Œ</p><p>æ‰§è¡Œ shell <code>ansible xxx -m shell -a &#39;ls /&#39;</code></p><p>æ‰§è¡Œ shell è„šæœ¬ <code>ansible xxx -m script -a ./xx.sh</code></p><p><code>copy</code>:æ”¯æŒç›®å½•</p><p><code>fetch</code>:åªèƒ½å•æ–‡ä»¶</p><p><code>file</code>: æ“ä½œæ–‡ä»¶ <code>ansible xxx -m file -a &#39;path=/data/xx.log state=touch group=xx owner=xx mode=777&#39;</code></p><p><code>unarchive</code>: copy=yes/no</p><p><code>archive</code> <code>hostname</code> <code>cron</code> <code>user</code> <code>setup</code></p><h3 id="playbook" tabindex="-1"><a class="header-anchor" href="#playbook" aria-hidden="true">#</a> playbook</h3><p><code>ansible-playbook xxx.yaml [--check --list-hosts --list-tags --list-tasks --limit -v]</code></p><ul><li><p>hosts</p><p>æ‰§è¡Œä»»åŠ¡çš„ä¸»æœº</p></li><li><p>tasks</p><p>ä»»åŠ¡</p></li><li><p>variables</p><p>å˜é‡</p><p>å®šä¹‰å˜é‡:</p><pre><code>  * `å‘½ä»¤è¡Œå‚æ•° -e xxx=ooo`

  * ç›´æ¥ä½¿ç”¨`setup`çš„ç³»ç»Ÿä¿¡æ¯ `gather_facts`è¦æ‰“å¼€

  * å•ç‹¬æ–‡ä»¶å®šä¹‰

  `inventory`ä¸»æœºæ¸…å•ä¸­æŒ‡å®šå˜é‡

  ```conf
  [xxx] # å•ä¸ªæŒ‡å®š
  192.168.100.1 xx=ooo
  192.168.100.2 xx=oop

  [xxx:vars] # æŒ‡å®šä¸€ç»„
  mm=kk

  ```

  * set_factæ¨¡å—å®šä¹‰

      ```yaml
      set_fact:
          php_redis_package: &quot;&quot;
      ```
</code></pre></li><li><p>templates</p><p>æ¨¡æ¿, templates ç›®å½•ä¸‹å®šä¹‰</p><p><code>xxx.j2</code> æ–‡ä»¶å®šä¹‰å˜é‡, task æ‰§è¡Œæ—¶è‡ªåŠ¨æ›¿æ¢</p></li><li><p>tags</p><p>æ ‡ç­¾</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> xxx<span class="token punctuation">:</span>yyyy
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  <span class="token key atrule">gather_facts</span><span class="token punctuation">:</span> no <span class="token comment"># æ˜¯å¦æ”¶é›†ä¸»æœºä¿¡æ¯</span>
  <span class="token key atrule">vars</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">xx</span><span class="token punctuation">:</span> oo

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> kkk
      <span class="token key atrule">tags</span><span class="token punctuation">:</span> pppp  <span class="token comment"># æ‰§è¡Œçš„æ—¶å€™æŒ‡å®štagæ‰§è¡Œ -t pppp</span>
      <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> ooo
      <span class="token key atrule">module</span><span class="token punctuation">:</span> args
      <span class="token key atrule">notify</span><span class="token punctuation">:</span> handlersName <span class="token comment"># è§¦å‘handlersæ‰§è¡Œ</span>

  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> variables_name <span class="token punctuation">}</span>  <span class="token comment"># å˜é‡</span>
      <span class="token key atrule">module</span><span class="token punctuation">:</span> args
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/vbeats/vblog/edit/next/base/base/linux.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: bootvue@gmail.com">bootvue</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/base/base/shell.html" class="" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></span><span class="next"><a href="/base/base/nginx.html" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.44dda959.js" defer></script>
  </body>
</html>
