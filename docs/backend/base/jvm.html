<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/x-icon" sizes="128x128" href="/favicon.ico"><title>JVM 🌟 | Vbeats</title><meta name="description" content="Good Good Study 👍 Day Day UP">
    <link rel="modulepreload" href="/assets/app.58f753f7.js"><link rel="modulepreload" href="/assets/jvm.html.f80abef5.js"><link rel="modulepreload" href="/assets/jvm.html.40dc4e1e.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.b29aeafa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.jpg" alt="Vbeats"><span class="site-name can-hide">Vbeats</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/base/" class="" aria-label="杂记"><!--[--><!--]--> 杂记 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/backend/" class="router-link-active" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontend/" class="" aria-label="前端👽"><!--[--><!--]--> 前端👽 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/cloud/" class="" aria-label="云☁️"><!--[--><!--]--> 云☁️ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/arch/" class="" aria-label="架构🥝"><!--[--><!--]--> 架构🥝 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/data/" class="" aria-label="数据处理"><!--[--><!--]--> 数据处理 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/datav/" class="" aria-label="数据可视化"><!--[--><!--]--> 数据可视化 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/" class="" aria-label="其它资源"><!--[--><!--]--> 其它资源 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/boot-vue" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="按下 / 搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/base/" class="" aria-label="杂记"><!--[--><!--]--> 杂记 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/backend/" class="router-link-active" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontend/" class="" aria-label="前端👽"><!--[--><!--]--> 前端👽 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/cloud/" class="" aria-label="云☁️"><!--[--><!--]--> 云☁️ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/arch/" class="" aria-label="架构🥝"><!--[--><!--]--> 架构🥝 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/data/" class="" aria-label="数据处理"><!--[--><!--]--> 数据处理 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/datav/" class="" aria-label="数据可视化"><!--[--><!--]--> 数据可视化 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/" class="" aria-label="其它资源"><!--[--><!--]--> 其它资源 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/boot-vue" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">基础 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/backend/base/jvm.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="JVM 🌟"><!--[--><!--]--> JVM 🌟 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/backend/base/jvm.html#反编译" class="router-link-active router-link-exact-active sidebar-item" aria-label="反编译"><!--[--><!--]--> 反编译 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#指令集架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="指令集架构"><!--[--><!--]--> 指令集架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#runtime" class="router-link-active router-link-exact-active sidebar-item" aria-label="Runtime"><!--[--><!--]--> Runtime <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#架构图" class="router-link-active router-link-exact-active sidebar-item" aria-label="架构图"><!--[--><!--]--> 架构图 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#classlocader" class="router-link-active router-link-exact-active sidebar-item" aria-label="classlocader"><!--[--><!--]--> classlocader <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#jvm-参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="jvm 参数"><!--[--><!--]--> jvm 参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#gc" class="router-link-active router-link-exact-active sidebar-item" aria-label="GC"><!--[--><!--]--> GC <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#oom" class="router-link-active router-link-exact-active sidebar-item" aria-label="oom"><!--[--><!--]--> oom <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#调试" class="router-link-active router-link-exact-active sidebar-item" aria-label="调试"><!--[--><!--]--> 调试 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#countdownlatch" class="router-link-active router-link-exact-active sidebar-item" aria-label="CountDownLatch"><!--[--><!--]--> CountDownLatch <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#cyclicbarrier" class="router-link-active router-link-exact-active sidebar-item" aria-label="CyclicBarrier"><!--[--><!--]--> CyclicBarrier <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#semaphore" class="router-link-active router-link-exact-active sidebar-item" aria-label="Semaphore"><!--[--><!--]--> Semaphore <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#reentrantlock" class="router-link-active router-link-exact-active sidebar-item" aria-label="ReentrantLock"><!--[--><!--]--> ReentrantLock <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#condition" class="router-link-active router-link-exact-active sidebar-item" aria-label="Condition"><!--[--><!--]--> Condition <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#readwritelock-reetrantreadwritelock" class="router-link-active router-link-exact-active sidebar-item" aria-label="ReadWriteLock/ReetrantReadWriteLock"><!--[--><!--]--> ReadWriteLock/ReetrantReadWriteLock <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#volatile" class="router-link-active router-link-exact-active sidebar-item" aria-label="volatile"><!--[--><!--]--> volatile <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#blockingqueue" class="router-link-active router-link-exact-active sidebar-item" aria-label="BlockingQueue"><!--[--><!--]--> BlockingQueue <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#threadpool" class="router-link-active router-link-exact-active sidebar-item" aria-label="ThreadPool"><!--[--><!--]--> ThreadPool <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#forkjoin" class="router-link-active router-link-exact-active sidebar-item" aria-label="ForkJoin"><!--[--><!--]--> ForkJoin <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#completeablefuture" class="router-link-active router-link-exact-active sidebar-item" aria-label="CompleteableFuture"><!--[--><!--]--> CompleteableFuture <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#函数式编程" class="router-link-active router-link-exact-active sidebar-item" aria-label="函数式编程"><!--[--><!--]--> 函数式编程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/base/jvm.html#spring-事务" class="router-link-active router-link-exact-active sidebar-item" aria-label="Spring 事务"><!--[--><!--]--> Spring 事务 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/backend/base/golang.html" class="sidebar-item" aria-label="GoLang 🦔"><!--[--><!--]--> GoLang 🦔 <!--[--><!--]--></a><!----></li><li><a href="/backend/base/python.html" class="sidebar-item" aria-label="Python 🐍"><!--[--><!--]--> Python 🐍 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">文章 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/backend/article/.md" class="sidebar-item" aria-label="/backend/article/.md"><!--[--><!--]--> /backend/article/.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="jvm-🌟" tabindex="-1"><a class="header-anchor" href="#jvm-🌟" aria-hidden="true">#</a> JVM 🌟</h1><p><a href="https://render.alipay.com/p/s/jvm-generate/" target="_blank" rel="noopener noreferrer">工具<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>hotspot</code> : <code>解释器</code>与<code>jit即时编译器</code>协同工作 <code>jrocket</code>: oracle 专注于服务端应用, 只包含即时编译器,启动慢 运行时速度快 <code>j9</code>: ibm <code>harmony</code>: apache/ibm/intel</p><p>等等....</p><h2 id="反编译" tabindex="-1"><a class="header-anchor" href="#反编译" aria-hidden="true">#</a> 反编译</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>javap -v xxx.class
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="指令集架构" tabindex="-1"><a class="header-anchor" href="#指令集架构" aria-hidden="true">#</a> 指令集架构</h2><blockquote><p>jvm 基于栈的指令集架构, 指令集小 步骤多 跨平台 和 cpu 指令集耦合低</p></blockquote><h2 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h2><ul><li>启动 bootstrap class loader 创建 init class 来完成</li><li>执行 java 程序</li><li>退出 正常/异常退出</li></ul><h2 id="runtime" tabindex="-1"><a class="header-anchor" href="#runtime" aria-hidden="true">#</a> Runtime</h2><blockquote><p>管理运行时数据区<code>runtime data area</code></p></blockquote><h2 id="架构图" tabindex="-1"><a class="header-anchor" href="#架构图" aria-hidden="true">#</a> 架构图</h2><p><img src="/assets/jvm.b5939b84.png" alt=""></p><h2 id="classlocader" tabindex="-1"><a class="header-anchor" href="#classlocader" aria-hidden="true">#</a> classlocader</h2><ol><li>加载 class 并实例化</li><li>link prepare 阶段 类变量初始化</li></ol><h2 id="jvm-参数" tabindex="-1"><a class="header-anchor" href="#jvm-参数" aria-hidden="true">#</a> jvm 参数</h2><ul><li><p>Xms 堆起始内存</p></li><li><p>Xmx 堆最大内存</p></li><li><p>Xmn 新生代大小</p></li><li><p>XX:+PrintGCDetails</p></li><li><p>XX:metspaceSize</p></li><li><p>client/server 64 位默认 server 模式</p></li><li><p>XX:+HeapDumpOnOutOfMemoryError oom 生成 dump 文件</p><p>占用大小-&gt;gc 后大小-&gt;分配的大小</p><p><code>yongGC</code> <code>old</code> <code>GC fullGc</code></p></li></ul><h2 id="gc" tabindex="-1"><a class="header-anchor" href="#gc" aria-hidden="true">#</a> GC</h2><p><code>G1</code></p><ul><li>并发/并行 标记</li><li>分代收集</li><li>空间整合</li><li>可预测的停顿时间模型</li></ul><h2 id="oom" tabindex="-1"><a class="header-anchor" href="#oom" aria-hidden="true">#</a> oom</h2><ul><li><p>年轻代</p><p>存活时间短 eden space 满了 gc 转入老年代</p></li><li><p>老年代</p><p>存活时间长 XX:NewRatio=4 新时代 1 老年代 4</p></li><li><p>minor gc 新生代 gc</p></li><li><p>major gc 老年代 gc 用户线程暂停 尽量避免</p></li><li><p>full gc 用户线程暂停 system.gc() 老年代空间不足 方法区空间不足 尽量避免</p></li><li><p>方法区超限</p></li></ul><h2 id="调试" tabindex="-1"><a class="header-anchor" href="#调试" aria-hidden="true">#</a> 调试</h2><ul><li><p>jvisualVM</p></li><li><p>flight recorder</p></li><li><p>jprofiler</p></li><li><p>gcviewer/gceasy</p></li></ul><p>内存泄露检查--&gt;堆/方法区内存参数</p><h1 id="并发编程" tabindex="-1"><a class="header-anchor" href="#并发编程" aria-hidden="true">#</a> 并发编程</h1><h2 id="countdownlatch" tabindex="-1"><a class="header-anchor" href="#countdownlatch" aria-hidden="true">#</a> CountDownLatch</h2><p>减法 线程外等待</p><h2 id="cyclicbarrier" tabindex="-1"><a class="header-anchor" href="#cyclicbarrier" aria-hidden="true">#</a> CyclicBarrier</h2><p>加法 线程内部等待</p><h2 id="semaphore" tabindex="-1"><a class="header-anchor" href="#semaphore" aria-hidden="true">#</a> Semaphore</h2><p>信号量 控制线程最大并发数量 acquire()/release()</p><h2 id="reentrantlock" tabindex="-1"><a class="header-anchor" href="#reentrantlock" aria-hidden="true">#</a> ReentrantLock</h2><p>lock/unLock</p><h2 id="condition" tabindex="-1"><a class="header-anchor" href="#condition" aria-hidden="true">#</a> Condition</h2><p>条件队列 await/signal 一个线程阻塞等待另一个线程的信号</p><h2 id="readwritelock-reetrantreadwritelock" tabindex="-1"><a class="header-anchor" href="#readwritelock-reetrantreadwritelock" aria-hidden="true">#</a> ReadWriteLock/ReetrantReadWriteLock</h2><p>读写锁 readLock/writeLock</p><h2 id="volatile" tabindex="-1"><a class="header-anchor" href="#volatile" aria-hidden="true">#</a> volatile</h2><p>共享变量（类的成员变量、类的静态成员变量）</p><ul><li>保证了不同线程对这个变量进行操作时的可见性，即一个线程修改了某个变量的值，这新值对其他线程来说是立即可见的</li><li>禁止进行指令重排序</li></ul><p>应用场景: <code>状态标志</code> <code>单例模式</code> <code>独立观察</code></p><h2 id="blockingqueue" tabindex="-1"><a class="header-anchor" href="#blockingqueue" aria-hidden="true">#</a> BlockingQueue</h2><p>阻塞队列 put/take</p><ul><li>arrayBlockingqueue 数组结构</li><li>linkedBlockingqueue 链表结构</li><li>linkedBlockingdeque 双向链表阻塞队列</li></ul><p><code>插入</code>: add(抛异常) offer(特殊值) put(阻塞) offer(超时) <code>移除</code>: remove poll take poll(time) <code>检查</code>: element peek 无 无</p><blockquote><p>特殊值: 增删返回 true/false 检查返回元素/null</p></blockquote><h2 id="threadpool" tabindex="-1"><a class="header-anchor" href="#threadpool" aria-hidden="true">#</a> ThreadPool</h2><p><code>ExecutorService</code> <code>Executors</code></p><ul><li>newFixedThreadPool</li><li>newCachedThreadPool</li><li>newSingleThreadExecutor</li><li>newScheduledThreadPool</li></ul><p><code>ThreadPoolExecutor</code>:</p><blockquote><p>最大容纳数 maxpoolSize+queueSize</p></blockquote><ul><li>corePoolSize</li><li>maxPoolSize cpu 密集型:cpu 核心数 io 密集型:最大任务数-队列容量）/每个线程每秒处理能力 = 最大线程数</li><li>keepAliveTime</li><li>blockingQueue</li><li>threadFactory</li><li>rejectHandler <code>Abort</code>抛异常 <code>CallerRuns</code>回退给调用方线程处理 <code>Discard</code>丢弃 <code>DiscardOldest</code></li></ul><h2 id="forkjoin" tabindex="-1"><a class="header-anchor" href="#forkjoin" aria-hidden="true">#</a> ForkJoin</h2><p><code>ForkJoinPool</code> <code>ForkJoinTask</code> <code>RecursiveTask</code></p><p><code>computer</code>方法内 fork() 递归执行 computer 方法任务, 汇总结果 result=xx.join()</p><h2 id="completeablefuture" tabindex="-1"><a class="header-anchor" href="#completeablefuture" aria-hidden="true">#</a> CompleteableFuture</h2><p><code>异步回调</code></p><p><code>runAsync</code> : 没有返回值 <code>supplyAsync</code> : 需要返回值</p><p><code>whenComplete</code> <code>exceptionaly</code> <code>get</code></p><h2 id="函数式编程" tabindex="-1"><a class="header-anchor" href="#函数式编程" aria-hidden="true">#</a> 函数式编程</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">// T:输入 R:返回</span>
<span class="token comment">// R apply(T)</span>
<span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">//   T:输入 返回:Boolean</span>

<span class="token comment">//   Boolean test(T)</span>

<span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">//   T:输入 返回:void</span>

<span class="token comment">//   void accept(T)</span>

<span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">//   输入:void 返回:T</span>

<span class="token comment">//   T get()</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="spring-事务" tabindex="-1"><a class="header-anchor" href="#spring-事务" aria-hidden="true">#</a> Spring 事务</h2><p>隔离级别:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ISOLATION_DEFAULT	使用后端数据库默认的隔离级别
ISOLATION_READ_UNCOMMITTED	允许读取尚未提交的更改。可能导致脏读、幻读或不可重复读
ISOLATION_READ_COMMITTED	允许从已经提交的并发事务读取。可防止脏读，但幻读和不可重复读仍可能会发生
ISOLATION_REPEATABLE_READ	对相同字段的多次读取的结果是一致的，除非数据被当前事务本身改变。可防止脏读和不可重复读，但幻读仍可能发生
ISOLATION_SERIALIZABLE	完全服从ACID的隔离级别，确保不发生脏读、不可重复读和幻读。这在所有隔离级别中也是最慢的，因为它通常是通过完全锁定当前事务所涉及的数据表来完成的, 可以加共享锁(不排他), 一个事务不释放,其它事务只能读数据
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>传播机制:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PROPAGATION_MANDATORY	表示该方法必须运行在一个事务中。如果当前没有事务正在发生，将抛出一个异常
PROPAGATION_NESTED	表示如果当前正有一个事务在进行中，则该方法应当运行在一个嵌套式事务中。被嵌套的事务可以独立于封装事务进行提交或回滚。如果封装事务不存在，行为就像PROPAGATION_REQUIRES一样。
PROPAGATION_NEVER	表示当前的方法不应该在一个事务中运行。如果一个事务正在进行，则会抛出一个异常。
PROPAGATION_NOT_SUPPORTED	表示该方法不应该在一个事务中运行。如果一个现有事务正在进行中，它将在该方法的运行期间被挂起。
PROPAGATION_SUPPORTS	表示当前方法不需要事务性上下文，但是如果有一个事务已经在运行的话，它也可以在这个事务里运行。
PROPAGATION_REQUIRES_NEW	表示当前方法必须在它自己的事务里运行。一个新的事务将被启动，而且如果有一个现有事务在运行的话，则将在这个方法运行期间被挂起。
PROPAGATION_REQUIRES	表示当前方法必须在一个事务中运行。如果一个现有事务正在进行中，该方法将在那个事务中运行，否则就要开始一个新事务。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/vbeats/vblog/edit/next/backend/base/jvm.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: bootvue@gmail.com">bootvue</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/backend/base/golang.html" class="" aria-label="GoLang 🦔"><!--[--><!--]--> GoLang 🦔 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.58f753f7.js" defer></script>
  </body>
</html>
