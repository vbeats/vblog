"use strict";(self.webpackChunkvblog=self.webpackChunkvblog||[]).push([[756],{9336:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-8d4cfa9e",path:"/cloud/base/kong.html",title:"Kong",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装",slug:"安装",children:[]},{level:2,title:"使用",slug:"使用",children:[]}],filePathRelative:"cloud/base/kong.md",git:{updatedTime:1639112941e3,contributors:[{name:"bootvue",email:"bootvue@gmail.com",commits:1}]}}},4559:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});const e=(0,a(6252).uE)('<h1 id="kong" tabindex="-1"><a class="header-anchor" href="#kong" aria-hidden="true">#</a> Kong</h1><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># postgresql</span>\n<span class="token function">sudo</span> docker run -d --name kong-database <span class="token punctuation">\\</span>\n                -p <span class="token number">5432</span>:5432 <span class="token punctuation">\\</span>\n                -e <span class="token string">&quot;POSTGRES_USER=kong&quot;</span> <span class="token punctuation">\\</span>\n                -e <span class="token string">&quot;POSTGRES_DB=kong&quot;</span> <span class="token punctuation">\\</span>\n                -e <span class="token string">&quot;POSTGRES_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>\n                postgres:9.6\n\n<span class="token comment"># 初始化数据库</span>\n<span class="token function">sudo</span> docker run --rm <span class="token punctuation">\\</span>\n    --link kong-database:kong-database <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_DATABASE=postgres&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_PG_HOST=kong-database&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_PG_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot;</span> <span class="token punctuation">\\</span>\n    kong kong migrations up\n\n<span class="token comment"># kong</span>\n<span class="token function">sudo</span> docker run -d --name kong <span class="token punctuation">\\</span>\n    --link kong-database:kong-database <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_DATABASE=postgres&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_PG_HOST=kong-database&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_PG_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_PROXY_ACCESS_LOG=/dev/stdout&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_ADMIN_ACCESS_LOG=/dev/stdout&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_PROXY_ERROR_LOG=/dev/stderr&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_ADMIN_ERROR_LOG=/dev/stderr&quot;</span> <span class="token punctuation">\\</span>\n    -e <span class="token string">&quot;KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl&quot;</span> <span class="token punctuation">\\</span>\n    -p <span class="token number">80</span>:8000 <span class="token punctuation">\\</span>\n    -p <span class="token number">443</span>:8443 <span class="token punctuation">\\</span>\n    -p <span class="token number">8001</span>:8001 <span class="token punctuation">\\</span>\n    -p <span class="token number">8444</span>:8444 <span class="token punctuation">\\</span>\n    kong\n\n<span class="token comment"># konga 数据库</span>\n<span class="token function">sudo</span> docker run --link kong-database:kong-database --rm pantsel/konga:latest -c prepare -a postgres -u postgresql://kong:kong@kong-database:5432/konga\n\n<span class="token comment"># konga</span>\n<span class="token function">sudo</span> docker run -d -p <span class="token number">1337</span>:1337 <span class="token punctuation">\\</span>\n          --link kong-database:kong-database <span class="token punctuation">\\</span>\n          -e <span class="token string">&quot;TOKEN_SECRET=123456&quot;</span> <span class="token punctuation">\\</span>\n          -e <span class="token string">&quot;DB_ADAPTER=postgres&quot;</span> <span class="token punctuation">\\</span>\n          -e <span class="token string">&quot;DB_URI=postgresql://kong:kong@kong-database:5432/konga&quot;</span> <span class="token punctuation">\\</span>\n          --name konga <span class="token punctuation">\\</span>\n          pantsel/konga\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><blockquote><p>upstream --&gt; services --&gt; routes</p></blockquote>',5),p={},t=(0,a(3744).Z)(p,[["render",function(n,s){return e}]])},3744:(n,s)=>{s.Z=(n,s)=>{for(const[a,e]of s)n[a]=e;return n}}}]);