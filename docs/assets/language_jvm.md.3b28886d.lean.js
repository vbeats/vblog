import{o as l,c as e,a as n,b as a}from"./app.040fc7a7.js";const u='{"title":"JVM 🌟","description":"","frontmatter":{},"headers":[{"level":2,"title":"反编译","slug":"反编译"},{"level":2,"title":"指令集架构","slug":"指令集架构"},{"level":2,"title":"生命周期","slug":"生命周期"},{"level":2,"title":"Runtime","slug":"runtime"},{"level":2,"title":"架构图","slug":"架构图"},{"level":2,"title":"classlocader","slug":"classlocader"},{"level":2,"title":"jvm 参数","slug":"jvm-参数"},{"level":2,"title":"GC","slug":"gc"},{"level":2,"title":"oom","slug":"oom"},{"level":2,"title":"调试","slug":"调试"},{"level":2,"title":"CountDownLatch","slug":"countdownlatch"},{"level":2,"title":"CyclicBarrier","slug":"cyclicbarrier"},{"level":2,"title":"Semaphore","slug":"semaphore"},{"level":2,"title":"ReentrantLock","slug":"reentrantlock"},{"level":2,"title":"Condition","slug":"condition"},{"level":2,"title":"ReadWriteLock/ReetrantReadWriteLock","slug":"readwritelock-reetrantreadwritelock"},{"level":2,"title":"volatile","slug":"volatile"},{"level":2,"title":"BlockingQueue","slug":"blockingqueue"},{"level":2,"title":"ThreadPool","slug":"threadpool"},{"level":2,"title":"ForkJoin","slug":"forkjoin"},{"level":2,"title":"CompleteableFuture","slug":"completeablefuture"},{"level":2,"title":"函数式编程","slug":"函数式编程"}],"relativePath":"language/jvm.md","lastUpdated":1627208176274}',o={},r=n("h1",{id:"jvm-🌟"},[n("a",{class:"header-anchor",href:"#jvm-🌟","aria-hidden":"true"},"#"),a(" JVM 🌟")],-1),c=n("p",null,[n("a",{href:"https://render.alipay.com/p/s/jvm-generate/",target:"_blank",rel:"noopener noreferrer"},"工具")],-1),t=n("p",null,[n("code",null,"hotspot"),a(" : "),n("code",null,"解释器"),a("与"),n("code",null,"jit即时编译器"),a("协同工作 "),n("code",null,"jrocket"),a(": oracle 专注于服务端应用, 只包含即时编译器,启动慢 运行时速度快 "),n("code",null,"j9"),a(": ibm "),n("code",null,"harmony"),a(": apache/ibm/intel")],-1),i=n("p",null,"等等…",-1),s=n("h2",{id:"反编译"},[n("a",{class:"header-anchor",href:"#反编译","aria-hidden":"true"},"#"),a(" 反编译")],-1),d=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,"javap -v xxx.class\n")])],-1),h=n("h2",{id:"指令集架构"},[n("a",{class:"header-anchor",href:"#指令集架构","aria-hidden":"true"},"#"),a(" 指令集架构")],-1),p=n("blockquote",null,[n("p",null,"jvm 基于栈的指令集架构, 指令集小 步骤多 跨平台 和 cpu 指令集耦合低")],-1),m=n("h2",{id:"生命周期"},[n("a",{class:"header-anchor",href:"#生命周期","aria-hidden":"true"},"#"),a(" 生命周期")],-1),k=n("ul",null,[n("li",null,"启动 bootstrap class loader 创建 init class 来完成"),n("li",null,"执行 java 程序"),n("li",null,"退出 正常/异常退出")],-1),g=n("h2",{id:"runtime"},[n("a",{class:"header-anchor",href:"#runtime","aria-hidden":"true"},"#"),a(" Runtime")],-1),v=n("blockquote",null,[n("p",null,[a("管理运行时数据区"),n("code",null,"runtime data area")])],-1),f=n("h2",{id:"架构图"},[n("a",{class:"header-anchor",href:"#架构图","aria-hidden":"true"},"#"),a(" 架构图")],-1),j=n("p",null,[n("img",{src:"/assets/jvm.b5939b84.png",alt:""})],-1),b=n("h2",{id:"classlocader"},[n("a",{class:"header-anchor",href:"#classlocader","aria-hidden":"true"},"#"),a(" classlocader")],-1),T=n("ol",null,[n("li",null,"加载 class 并实例化"),n("li",null,"link prepare 阶段 类变量初始化")],-1),w=n("h2",{id:"jvm-参数"},[n("a",{class:"header-anchor",href:"#jvm-参数","aria-hidden":"true"},"#"),a(" jvm 参数")],-1),y=n("ul",null,[n("li",null,[n("p",null,"Xms 堆起始内存")]),n("li",null,[n("p",null,"Xmx 堆最大内存")]),n("li",null,[n("p",null,"Xmn 新生代大小")]),n("li",null,[n("p",null,"XX:+PrintGCDetails")]),n("li",null,[n("p",null,"XX:metspaceSize")]),n("li",null,[n("p",null,"client/server 64 位默认 server 模式")]),n("li",null,[n("p",null,"XX:+HeapDumpOnOutOfMemoryError oom 生成 dump 文件"),n("p",null,"占用大小->gc 后大小->分配的大小"),n("p",null,[n("code",null,"yongGC"),a(),n("code",null,"old"),a(),n("code",null,"GC fullGc")])])],-1),C=n("h2",{id:"gc"},[n("a",{class:"header-anchor",href:"#gc","aria-hidden":"true"},"#"),a(" GC")],-1),x=n("p",null,[n("code",null,"G1")],-1),R=n("ul",null,[n("li",null,"并发/并行 标记"),n("li",null,"分代收集"),n("li",null,"空间整合"),n("li",null,"可预测的停顿时间模型")],-1),q=n("h2",{id:"oom"},[n("a",{class:"header-anchor",href:"#oom","aria-hidden":"true"},"#"),a(" oom")],-1),P=n("ul",null,[n("li",null,[n("p",null,"年轻代"),n("p",null,"存活时间短 eden space 满了 gc 转入老年代")]),n("li",null,[n("p",null,"老年代"),n("p",null,"存活时间长 XX:NewRatio=4 新时代 1 老年代 4")]),n("li",null,[n("p",null,"minor gc 新生代 gc")]),n("li",null,[n("p",null,"major gc 老年代 gc 用户线程暂停 尽量避免")]),n("li",null,[n("p",null,"full gc 用户线程暂停 system.gc() 老年代空间不足 方法区空间不足 尽量避免")]),n("li",null,[n("p",null,"方法区超限")])],-1),L=n("h2",{id:"调试"},[n("a",{class:"header-anchor",href:"#调试","aria-hidden":"true"},"#"),a(" 调试")],-1),S=n("ul",null,[n("li",null,[n("p",null,"jvisualVM")]),n("li",null,[n("p",null,"flight recorder")]),n("li",null,[n("p",null,"jprofiler")]),n("li",null,[n("p",null,"gcviewer/gceasy")])],-1),X=n("p",null,"内存泄露检查–>堆/方法区内存参数",-1),B=n("h1",{id:"并发编程"},[n("a",{class:"header-anchor",href:"#并发编程","aria-hidden":"true"},"#"),a(" 并发编程")],-1),F=n("h2",{id:"countdownlatch"},[n("a",{class:"header-anchor",href:"#countdownlatch","aria-hidden":"true"},"#"),a(" CountDownLatch")],-1),G=n("p",null,"减法 线程外等待",-1),D=n("h2",{id:"cyclicbarrier"},[n("a",{class:"header-anchor",href:"#cyclicbarrier","aria-hidden":"true"},"#"),a(" CyclicBarrier")],-1),J=n("p",null,"加法 线程内部等待",-1),z=n("h2",{id:"semaphore"},[n("a",{class:"header-anchor",href:"#semaphore","aria-hidden":"true"},"#"),a(" Semaphore")],-1),E=n("p",null,"信号量 控制线程最大并发数量 acquire()/release()",-1),A=n("h2",{id:"reentrantlock"},[n("a",{class:"header-anchor",href:"#reentrantlock","aria-hidden":"true"},"#"),a(" ReentrantLock")],-1),M=n("p",null,"lock/unLock",-1),O=n("h2",{id:"condition"},[n("a",{class:"header-anchor",href:"#condition","aria-hidden":"true"},"#"),a(" Condition")],-1),W=n("p",null,"条件队列 await/signal 一个线程阻塞等待另一个线程的信号",-1),Q=n("h2",{id:"readwritelock-reetrantreadwritelock"},[n("a",{class:"header-anchor",href:"#readwritelock-reetrantreadwritelock","aria-hidden":"true"},"#"),a(" ReadWriteLock/ReetrantReadWriteLock")],-1),V=n("p",null,"读写锁 readLock/writeLock",-1),H=n("h2",{id:"volatile"},[n("a",{class:"header-anchor",href:"#volatile","aria-hidden":"true"},"#"),a(" volatile")],-1),N=n("p",null,"共享变量（类的成员变量、类的静态成员变量）",-1),U=n("ul",null,[n("li",null,"保证了不同线程对这个变量进行操作时的可见性，即一个线程修改了某个变量的值，这新值对其他线程来说是立即可见的"),n("li",null,"禁止进行指令重排序")],-1),_=n("p",null,[a("应用场景: "),n("code",null,"状态标志"),a(),n("code",null,"单例模式"),a(),n("code",null,"独立观察")],-1),I=n("h2",{id:"blockingqueue"},[n("a",{class:"header-anchor",href:"#blockingqueue","aria-hidden":"true"},"#"),a(" BlockingQueue")],-1),K=n("p",null,"阻塞队列 put/take",-1),Y=n("ul",null,[n("li",null,"arrayBlockingqueue 数组结构"),n("li",null,"linkedBlockingqueue 链表结构"),n("li",null,"linkedBlockingdeque 双向链表阻塞队列")],-1),Z=n("p",null,[n("code",null,"插入"),a(": add(抛异常) offer(特殊值) put(阻塞) offer(超时) "),n("code",null,"移除"),a(": remove poll take poll(time) "),n("code",null,"检查"),a(": element peek 无 无")],-1),$=n("blockquote",null,[n("p",null,"特殊值: 增删返回 true/false 检查返回元素/null")],-1),ll=n("h2",{id:"threadpool"},[n("a",{class:"header-anchor",href:"#threadpool","aria-hidden":"true"},"#"),a(" ThreadPool")],-1),el=n("p",null,[n("code",null,"ExecutorService"),a(),n("code",null,"Executors")],-1),nl=n("ul",null,[n("li",null,"newFixedThreadPool"),n("li",null,"newCachedThreadPool"),n("li",null,"newSingleThreadExecutor"),n("li",null,"newScheduledThreadPool")],-1),al=n("p",null,[n("code",null,"ThreadPoolExecutor"),a(":")],-1),ul=n("blockquote",null,[n("p",null,"最大容纳数 maxpoolSize+queueSize")],-1),ol=n("ul",null,[n("li",null,"corePoolSize"),n("li",null,"maxPoolSize cpu 密集型:cpu 核心数 io 密集型:最大任务数-队列容量）/每个线程每秒处理能力 = 最大线程数"),n("li",null,"keepAliveTime"),n("li",null,"blockingQueue"),n("li",null,"threadFactory"),n("li",null,[a("rejectHandler "),n("code",null,"Abort"),a("抛异常 "),n("code",null,"CallerRuns"),a("回退给调用方线程处理 "),n("code",null,"Discard"),a("丢弃 "),n("code",null,"DiscardOldest")])],-1),rl=n("h2",{id:"forkjoin"},[n("a",{class:"header-anchor",href:"#forkjoin","aria-hidden":"true"},"#"),a(" ForkJoin")],-1),cl=n("p",null,[n("code",null,"ForkJoinPool"),a(),n("code",null,"ForkJoinTask"),a(),n("code",null,"RecursiveTask")],-1),tl=n("p",null,[n("code",null,"computer"),a("方法内 fork() 递归执行 computer 方法任务, 汇总结果 result=xx.join()")],-1),il=n("h2",{id:"completeablefuture"},[n("a",{class:"header-anchor",href:"#completeablefuture","aria-hidden":"true"},"#"),a(" CompleteableFuture")],-1),sl=n("p",null,[n("code",null,"异步回调")],-1),dl=n("p",null,[n("code",null,"runAsync"),a(" : 没有返回值 "),n("code",null,"supplyAsync"),a(" : 需要返回值")],-1),hl=n("p",null,[n("code",null,"whenComplete"),a(),n("code",null,"exceptionaly"),a(),n("code",null,"get")],-1),pl=n("h2",{id:"函数式编程"},[n("a",{class:"header-anchor",href:"#函数式编程","aria-hidden":"true"},"#"),a(" 函数式编程")],-1),ml=n("div",{class:"language-java"},[n("pre",null,[n("code",null,[n("span",{class:"token class-name"},"Function"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"T"),n("span",{class:"token punctuation"},","),n("span",{class:"token class-name"},"R"),n("span",{class:"token punctuation"},">")]),a("\n"),n("span",{class:"token comment"},"// T:输入 R:返回"),a("\n"),n("span",{class:"token comment"},"// R apply(T)"),a("\n"),n("span",{class:"token class-name"},"Predicate"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"T"),n("span",{class:"token punctuation"},">")]),a("\n\n"),n("span",{class:"token comment"},"//   T:输入 返回:Boolean"),a("\n\n"),n("span",{class:"token comment"},"//   Boolean test(T)"),a("\n\n"),n("span",{class:"token class-name"},"Consumer"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"T"),n("span",{class:"token punctuation"},">")]),a("\n\n"),n("span",{class:"token comment"},"//   T:输入 返回:void"),a("\n\n"),n("span",{class:"token comment"},"//   void accept(T)"),a("\n\n"),n("span",{class:"token class-name"},"Supplier"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"T"),n("span",{class:"token punctuation"},">")]),a("\n\n"),n("span",{class:"token comment"},"//   输入:void 返回:T"),a("\n\n"),n("span",{class:"token comment"},"//   T get()"),a("\n")])])],-1);o.render=function(n,a,u,o,kl,gl){return l(),e("div",null,[r,c,t,i,s,d,h,p,m,k,g,v,f,j,b,T,w,y,C,x,R,q,P,L,S,X,B,F,G,D,J,z,E,A,M,O,W,Q,V,H,N,U,_,I,K,Y,Z,$,ll,el,nl,al,ul,ol,rl,cl,tl,il,sl,dl,hl,pl,ml])};export default o;export{u as __pageData};
