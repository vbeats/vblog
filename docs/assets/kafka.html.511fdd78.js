import{e}from"./app.b10f5d65.js";import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";const o={},n=e(`<h1 id="kafka-\u{1F4A5}" tabindex="-1"><a class="header-anchor" href="#kafka-\u{1F4A5}" aria-hidden="true">#</a> Kafka \u{1F4A5}</h1><blockquote><p>\u57FA\u4E8E\u53D1\u5E03/\u8BA2\u9605\u6A21\u5F0F</p></blockquote><p>\u65E7\u7248\u672C Zookeeper \u6709\u5B58\u6D88\u606F\u6D88\u8D39\u4F4D\u7F6E \u65B0\u7248\u672C\u76F4\u63A5\u5B58\u50A8\u5230 kafaka \u96C6\u7FA4\u4E2D \u6D88\u606F\u4FDD\u5B58\u6839\u636E Topic \u5F52\u7C7B, producer \u4E0E consumer, \u96C6\u7FA4\u4E2D\u6BCF\u4E2A kafka \u5B9E\u4F8B\u79F0\u4E3A broker, \u6574\u4E2A\u96C6\u7FA4\u4E0E consumer \u4F9D\u8D56 zookeeper, kafka \u53EA\u652F\u6301 consumer poll \u8F6E\u8BE2\u83B7\u53D6\u6D88\u606F.</p><h2 id="topic" tabindex="-1"><a class="header-anchor" href="#topic" aria-hidden="true">#</a> Topic</h2><p>\u5206\u533A \u6570\u636E\u5B58\u50A8, topic \u4E0B\u5305\u542B <code>leader</code> \u4E0E <code>follower</code>, \u4E00\u4E2A topic \u5B9E\u9645\u5C31\u662F\u4E00\u4E2A\u6587\u4EF6\u76EE\u5F55</p><h2 id="consumer" tabindex="-1"><a class="header-anchor" href="#consumer" aria-hidden="true">#</a> Consumer</h2><p>\u540C\u4E00\u4E2A\u7EC4\u4E0B\u7684 consumer \u4E0D\u80FD\u6D88\u8D39\u540C\u4E00\u4E2A\u5206\u533A\u7684\u6570\u636E</p><h2 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h2><p>broker \u96C6\u7FA4:</p><p>server.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#\u8BBE\u7F6E\u552F\u4E00\u7684id</span>
<span class="token attr-name">broker.id</span><span class="token punctuation">=</span><span class="token attr-value">0</span>
<span class="token comment">#\u5141\u8BB8\u5220\u9664</span>
<span class="token attr-name">delete.topic.enable</span><span class="token punctuation">=</span><span class="token attr-value">true</span>

<span class="token comment">#logs\u76EE\u5F55  \u4E0D\u53EA\u65E5\u5FD7  \u6570\u636E\u4E5F\u5B58\u5728\u8FD9\u91CC</span>
<span class="token attr-name">log.dirs</span><span class="token punctuation">=</span><span class="token attr-value">....</span>

<span class="token comment">#zookeeper</span>
<span class="token attr-name">zookeeper.connect</span><span class="token punctuation">=</span><span class="token attr-value">xxxx:2181,xxxx:2181</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="\u6570\u636E\u53EF\u9760\u6027" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u53EF\u9760\u6027" aria-hidden="true">#</a> \u6570\u636E\u53EF\u9760\u6027</h2><blockquote><p>\u751F\u4EA7\u8005\u53D1\u9001\u6D88\u606F, \u5168\u90E8\u5206\u533A\u90FD\u8981\u540C\u6B65\u6210\u529F \u8FD4\u56DE\u6210\u529F ACK, \u751F\u4EA7\u8005\u7EE7\u7EED\u53D1</p></blockquote><blockquote><p>leader---&gt;follower \u540C\u6B65\u8282\u70B9\u6162\u7684\u6216\u8005\u6302\u4E86\u7684\u5254\u51FA\u540C\u6B65</p></blockquote><blockquote><p>\u67D0\u4E9B\u4E0D\u91CD\u8981\u7684\u6570\u636E, \u4E0D\u9700\u8981\u5B8C\u5168\u540C\u6B65\u6210\u529F</p></blockquote><h2 id="\u4E00\u81F4\u6027" tabindex="-1"><a class="header-anchor" href="#\u4E00\u81F4\u6027" aria-hidden="true">#</a> \u4E00\u81F4\u6027</h2><p>\u6570\u636E\u4E0D\u4E00\u81F4, \u6D88\u8D39\u8005\u53EF\u89C1 offset: \u6240\u6709\u8282\u70B9\u90FD\u6709\u7684\u6570\u636E\u6700\u5C0F\u7684 log end offset \u91CD\u65B0\u9009\u4E3E leader \u65F6, \u4E0D\u540C\u526F\u672C\u4E0D\u4E00\u81F4\u7684\u6570\u636E(&gt;log end offset)\u7684\u6570\u636E\u4E22\u5F03</p><h2 id="\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u547D\u4EE4" aria-hidden="true">#</a> \u547D\u4EE4</h2><ol><li>\u63D2\u5165 topic :</li></ol><blockquote><p>bin/kafka-topics.sh --create --zookeeper xxx:2181 --partitions 2 --replication-factor 3 --topic test</p></blockquote><p>2 \u4E2A\u5206\u533A 3 \u4E2A\u526F\u672C, \u6BCF\u4E2A\u5206\u533A\u5B9E\u9645\u521B\u5EFA\u4E86\u4E00\u4E2A\u6587\u4EF6\u76EE\u5F55. \u526F\u672C\u6570\u4E0D\u80FD\u5927\u4E8E zookeeper \u96C6\u7FA4\u4E0A\u6CE8\u518C\u7684 broker \u6570\u91CF</p><ol start="2"><li>\u67E5\u8BE2 topic:</li></ol><blockquote><p>bin/kafka-topics.sh --list --zookeeper xxxx:2181</p></blockquote><ol start="3"><li>producer \u53D1\u9001\u6D88\u606F:</li></ol><blockquote><p>bin/kafka-console-producer.sh --broker-list xxxx:9092 --topic test</p></blockquote><ol start="4"><li>consumer \u6D88\u8D39\u6D88\u606F:</li></ol><blockquote><p>bin/kafka-console-consumer.sh --zookeeper xxx:2181 --topic test [--from-beginning] (\u65B0\u7248\u672C\u6D88\u8D39\u7AEF\u6D88\u606F\u7684 offset \u76F4\u63A5\u7EF4\u62A4\u5728 broker \u4E2D, \u4E0D\u8D70 zookeeper)</p></blockquote><blockquote><p>bin/kafka-console-consumer.sh --bootstrap-server xxx:9092 --topic test [--from-beginning]</p></blockquote><h2 id="ack" tabindex="-1"><a class="header-anchor" href="#ack" aria-hidden="true">#</a> ACK</h2><ol><li>0: \u4E0D\u505C\u7684\u53D1,\u65E0\u9700 ack</li><li>1: leader \u786E\u8BA4\u4EE5\u540E\u7EE7\u7EED\u53D1</li><li>all(-1): leader \u4E0E\u6240\u6709\u7684 consumer \u5E94\u7B54\u786E\u8BA4\u540E\u7EE7\u7EED\u53D1</li></ol><blockquote><p>\u8981\u4E48\u91CD\u590D \u8981\u4E48\u4E22\u6570\u636E</p></blockquote><h2 id="\u5E42\u7B49\u6027" tabindex="-1"><a class="header-anchor" href="#\u5E42\u7B49\u6027" aria-hidden="true">#</a> \u5E42\u7B49\u6027</h2><p>\u53BB\u91CD <code>enbale.idompotence=true</code> ack \u9ED8\u8BA4\u4E3A all(-1)</p><h2 id="java-api" tabindex="-1"><a class="header-anchor" href="#java-api" aria-hidden="true">#</a> Java Api</h2><ol><li>KafkaProducer, KafkaConsumer</li><li>SimpleConsumer---&gt;\u904D\u5386, \u83B7\u53D6\u67D0\u4E2A topic,\u67D0\u4E2A\u5206\u533A\u7684 leader--&gt;\u901A\u8FC7 leader host ,\u6784\u9020 SimpleConsumer \u83B7\u53D6\u6570\u636E</li></ol><h2 id="stream-\u6D41\u5F0F\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#stream-\u6D41\u5F0F\u5904\u7406" aria-hidden="true">#</a> Stream \u6D41\u5F0F\u5904\u7406</h2><p>\u5F31\u9E21</p>`,37);function s(r,t){return n}var c=a(o,[["render",s]]);export{c as default};
