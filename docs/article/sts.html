<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sts ä¸´æ—¶èº«ä»½éªŒè¯ | ç æ­¥é±¼</title>
    <meta name="description" content="java node nodejs typescript k8s golang python react native vue vue3 flutter uni-app taro åç«¯ å‰ç«¯ app å°ç¨‹åº è¿ç»´ å¾®æœåŠ¡ æ¶æ„ å¾®ä¿¡ åšå®¢ ç¬”è®°">
    <link rel="stylesheet" href="/assets/style.5034d561.css">
    <link rel="modulepreload" href="/assets/Home.c9aa88e2.js">
    <link rel="modulepreload" href="/assets/app.9f9f1749.js">
    <link rel="modulepreload" href="/assets/article_sts.md.fe168d82.lean.js">
    <link rel="modulepreload" href="/assets/app.9f9f1749.js">
    <meta name="twitter:title" content="sts ä¸´æ—¶èº«ä»½éªŒè¯ | ç æ­¥é±¼">
    <meta property="og:title" content="sts ä¸´æ—¶èº«ä»½éªŒè¯ | ç æ­¥é±¼">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-6898e0ee><div class="sidebar-button" data-v-6898e0ee><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="ç æ­¥é±¼, back to home" data-v-6898e0ee data-v-7ac13a1e><!----> ç æ­¥é±¼</a><div class="flex-grow" data-v-6898e0ee></div><div class="nav" data-v-6898e0ee><nav class="nav-links" data-v-6898e0ee data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/" data-v-792310f6>é¦–é¡µ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/language/" data-v-792310f6>è¯­è¨€åŸºç¡€ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item active" href="/article/" data-v-792310f6>æ–‡ç«  <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/open/" data-v-792310f6>OpenSource <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/micro/" data-v-792310f6>å¾®æœåŠ¡ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/cloud/" data-v-792310f6>äº‘ â˜ï¸ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/other/" data-v-792310f6>æ‚ä¸ƒæ‚å…« <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item isExternal" href="https://github.com/vbeats" target="_blank" rel="noopener noreferrer" data-v-792310f6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-792310f6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-71f182b0><nav class="nav-links nav" data-v-71f182b0 data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/" data-v-792310f6>é¦–é¡µ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/language/" data-v-792310f6>è¯­è¨€åŸºç¡€ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item active" href="/article/" data-v-792310f6>æ–‡ç«  <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/open/" data-v-792310f6>OpenSource <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/micro/" data-v-792310f6>å¾®æœåŠ¡ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/cloud/" data-v-792310f6>äº‘ â˜ï¸ <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item" href="/other/" data-v-792310f6>æ‚ä¸ƒæ‚å…« <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-792310f6><a class="item isExternal" href="https://github.com/vbeats" target="_blank" rel="noopener noreferrer" data-v-792310f6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-792310f6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-71f182b0><!--[--><li class="sidebar-link"><p class="sidebar-link-item">é˜¿é‡Œäº‘</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/article/sts">sts</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#sts-ä¸´æ—¶èº«ä»½éªŒè¯">sts ä¸´æ—¶èº«ä»½éªŒè¯</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#æ¡ˆä¾‹-ğŸ¦·">æ¡ˆä¾‹ ğŸ¦·</a><!----></li></ul></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h2 id="sts-ä¸´æ—¶èº«ä»½éªŒè¯"><a class="header-anchor" href="#sts-ä¸´æ—¶èº«ä»½éªŒè¯" aria-hidden="true">#</a> sts ä¸´æ—¶èº«ä»½éªŒè¯</h2><h3 id="æ¡ˆä¾‹-ğŸ¦·"><a class="header-anchor" href="#æ¡ˆä¾‹-ğŸ¦·" aria-hidden="true">#</a> æ¡ˆä¾‹ ğŸ¦·</h3><blockquote><p>å®¢æˆ·ç«¯ä½¿ç”¨ STS ä¸´æ—¶å‡­è¯è®¿é—®äº‘æœåŠ¡</p></blockquote><p>sts å…¨ç§° <code>security token service</code>, ç›®å‰ä¸»æµçš„äº‘æœåŠ¡å¹³å°åŸºæœ¬éƒ½æ”¯æŒ, ä¸‹æ–‡ä¸»è¦ä»¥é˜¿é‡Œäº‘ä¸ºæ¡ˆä¾‹è®²è§£, aws å¤§åŒå°å¼‚, å¯ä»¥ç±»æ¯”å‚è€ƒ. sts å¯ä»¥ä½¿å®¢æˆ·ç«¯ä¸æš´éœ² accessKey ä¸ accessSecret å®ç°å¯¹äº‘æœåŠ¡çš„ç›´æ¥å®‰å…¨è¯·æ±‚è°ƒç”¨, å‡å°‘ä¸åç«¯æ¥å£çš„äº¤äº’ä¸é¢å¤–çš„æµé‡æ¶ˆè€—.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>æœåŠ¡ç«¯ç”Ÿæˆ sts ä¸´æ—¶ token ä¸ signature, å®¢æˆ·ç«¯ç›´æ¥åŸºäº <code>sts token</code>ã€<code>signature</code> ç­¾åç­‰å¿…è¦çš„å‚æ•°ä¿¡æ¯å®ç° OSS æ–‡ä»¶ä¸Šä¼ .</p></div><p>ä½¿ç”¨ STS æˆæƒç”¨æˆ·ç›´æ¥è®¿é—® OSS çš„æµç¨‹å¦‚ä¸‹ï¼š (å›¾ç‰‡æ¥æº é˜¿é‡Œäº‘æ–‡æ¡£)</p><p><img src="/assets/sts.528e516f.jpg" alt="sts"></p><ol><li><p>åˆ›å»ºç”¨äº sts è®¤è¯çš„<code>å­ç”¨æˆ·</code>, å¤åˆ¶ä¸‹<code>å­ç”¨æˆ·çš„ AccessKey ID ä¸ AccessKey Secret</code></p></li><li><p>æ–°å»º <code>Ram</code> è§’è‰², åˆ†é… <code>AliyunSTSAssumeRoleAccess</code> çš„ç³»ç»Ÿç­–ç•¥æƒé™, åŒæ—¶æ–°å¢æƒé™ç­–ç•¥, æ·»åŠ å¯¹åº”äº‘æœåŠ¡çš„ç­–ç•¥, ä»¥ oss ä¸ºä¾‹:</p><p>å…·ä½“ç­–ç•¥é…ç½®æ–¹å¼æŸ¥çœ‹æ–‡æ¡£, æˆ–è€…é€šè¿‡ç”Ÿæˆå™¨ç”Ÿæˆ.</p></li></ol><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;oss:PutObject&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;oss:GetObject&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;acs:oss:*:*:xx-bucket/oo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;acs:oss:*:*:xx-bucket/oo/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><p>å¤åˆ¶ä¸‹ <code>Ram</code> è§’è‰²çš„ <code>ARN</code> å­—æ®µå€¼, ä¹Ÿå¯ä»¥ä¿®æ”¹<code>æœ€å¤§ä¼šè¯æ—¶é—´</code>.</p></li><li><p>è´¦å·ç›¸å…³æƒé™åˆ†é…ç»“æŸ, ä¸‹é¢å¼€å§‹å†™æœåŠ¡ç«¯ä»£ç , ç”Ÿæˆ <code>sts token</code>ã€signature <code>ã€</code>policy` ç­‰ä¿¡æ¯.</p></li></ol><p>æ¥å£è°ƒç”¨ä¹Ÿå¯ä»¥ç”¨ <code>OpenAPI Explorer</code> è°ƒè¯•è¯·æ±‚</p><p>ä»¥ java ä»£ç ä¸ºä¾‹(åŸºäºæ—§ sdk):</p><div class="language-java"><pre><code><span class="token comment">// STSæ¥å…¥åœ°å€ï¼Œä¾‹å¦‚sts.cn-hangzhou.aliyuncs.comã€‚</span>
<span class="token class-name">String</span> regionId <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// å¡«å†™æ­¥éª¤1ç”Ÿæˆçš„è®¿é—®å¯†é’¥AccessKey IDå’ŒAccessKey Secretã€‚</span>
<span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">&quot;ooooooooooo&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> endPoint <span class="token operator">=</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// oss bucket endpoint</span>
<span class="token comment">// å¡«å†™æ­¥éª¤3è·å–çš„è§’è‰²ARNã€‚</span>
<span class="token class-name">String</span> roleArn <span class="token operator">=</span> appConfig<span class="token punctuation">.</span><span class="token function">getAliArn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è‡ªå®šä¹‰è§’è‰²ä¼šè¯åç§°ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒçš„ä»¤ç‰Œï¼Œä¾‹å¦‚å¯å¡«å†™ä¸ºSessionTestã€‚</span>
<span class="token class-name">String</span> roleSessionName <span class="token operator">=</span> <span class="token string">&quot;xxTest&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;oo&quot;</span><span class="token punctuation">;</span> <span class="token comment">// oss bucket å†…æ–‡ä»¶å­è·¯å¾„</span>
<span class="token class-name">Long</span> maxFileSize <span class="token operator">=</span> <span class="token number">10</span> _ <span class="token number">1024</span> _ <span class="token number">1024L</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å¤§ 10M</span>
<span class="token comment">// 1 å°æ—¶æœ‰æ•ˆ</span>
<span class="token class-name">OffsetDateTime</span> expires <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plusHours</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atOffset</span><span class="token punctuation">(</span><span class="token class-name">ZoneOffset</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;+8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
â€‹
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// sts token</span>
    â€‹
    <span class="token comment">// æ„é€  profileã€‚</span>
    <span class="token class-name">IClientProfile</span> profile <span class="token operator">=</span> <span class="token class-name">DefaultProfile</span><span class="token punctuation">.</span><span class="token function">getProfile</span><span class="token punctuation">(</span>regionId<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ„é€  clientã€‚</span>
    <span class="token class-name">DefaultAcsClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultAcsClient</span><span class="token punctuation">(</span>profile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">AssumeRoleRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AssumeRoleRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">setRoleArn</span><span class="token punctuation">(</span>roleArn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">setRoleSessionName</span><span class="token punctuation">(</span>roleSessionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">setDurationSeconds</span><span class="token punctuation">(</span><span class="token number">3600L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®ä¸´æ—¶è®¿é—®å‡­è¯çš„æœ‰æ•ˆæ—¶é—´ä¸º 3600 ç§’ã€‚</span>
    â€‹
    <span class="token class-name">AssumeRoleResponse</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">getAcsResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AssumeRoleResponse<span class="token punctuation">.</span>Credentials</span> credentials <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> stsToken <span class="token operator">=</span> credentials<span class="token punctuation">.</span><span class="token function">getSecurityToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    â€‹
    <span class="token comment">// ç­¾å</span>
    <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endPoint<span class="token punctuation">,</span> credentials<span class="token punctuation">.</span><span class="token function">getAccessKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> credentials<span class="token punctuation">.</span><span class="token function">getAccessKeySecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stsToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    â€‹
    <span class="token comment">// policy ç­–ç•¥, è¿›ä¸€æ­¥é™å®šæƒé™</span>
    <span class="token comment">// ä¸´æ—¶è®¿é—®å‡­è¯æœ€åè·å¾—çš„æƒé™æ˜¯æ­¥éª¤ 4 è®¾ç½®çš„è§’è‰²æƒé™å’Œè¯¥ Policy è®¾ç½®æƒé™çš„äº¤é›†ï¼Œ</span>
    <span class="token class-name">PolicyConditions</span> policyConditions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PolicyConditions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    policyConditions<span class="token punctuation">.</span><span class="token function">addConditionItem</span><span class="token punctuation">(</span><span class="token class-name">PolicyConditions</span><span class="token punctuation">.</span>COND_CONTENT_LENGTH_RANGE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> maxFileSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    â€‹
    <span class="token class-name">String</span> policy <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">generatePostPolicy</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>expires<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> policyConditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> signature <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">calculatePostSignature</span><span class="token punctuation">(</span>policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    â€‹
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;endpoint: {},policy: {},signature: {}, path: {}, accessKeyId: {}, sts_token: {}&quot;</span><span class="token punctuation">,</span>endPoint<span class="token punctuation">,</span> <span class="token class-name">Base64Utils</span><span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getByte</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    signature<span class="token punctuation">,</span> path<span class="token punctuation">,</span> credentials<span class="token punctuation">.</span><span class="token function">getAccessKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stsToken<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;è·å– sts token å¤±è´¥&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>æ³¨æ„: ç”Ÿæˆå®¢æˆ·ç«¯å‚æ•° <code>signature</code> æ—¶, åŸºäºçš„æ˜¯ç”Ÿæˆ <code>sts</code> æ—¶è¿”å›çš„<code>ä¸´æ—¶ AccessKeyId</code> å’Œ<code>ä¸´æ—¶çš„ AccessKeySecret</code>, åŒ…æ‹¬æœ€åå®¢æˆ·ç«¯å‘èµ· http è¯·æ±‚ä½¿ç”¨çš„ä¹Ÿæ˜¯ä¸ sts å¯¹åº”è¿”å›çš„<code>ä¸´æ—¶ AccessKeyId</code>, è€Œä¸æ˜¯ä¸€å¼€å§‹åˆ›å»ºçš„<code>å­ç”¨æˆ· id</code>.</p></div><p>æƒé™æ–¹é¢, ä¸€å®šæ˜¯ <code>Ram</code> è§’è‰²æƒé™ã€<code>policy</code>ã€<code>bucket</code> æƒé™çš„æœ€å°äº¤é›†. æ³¨æ„ä¸è¦æçš„å¤ªå¤æ‚å•°å—¦æŠŠè‡ªå·±å¸¦æ²Ÿé‡Œ.</p><ol start="5"><li>å®¢æˆ·ç«¯(webã€appã€å°ç¨‹åºã€postman ç­‰ç­‰)æ‹¿åˆ° sts tokenã€signatureã€policyã€ä¸´æ—¶çš„ accessKeyId ç­‰ä¿¡æ¯å°±å¯ä»¥ç›´æ¥å‘èµ· post è¯·æ±‚å‘ oss ä¸Šä¼ æ–‡ä»¶äº†.</li></ol><div class="language-bash"><pre><code>url: bucket endpoint

è¯·æ±‚æ–¹å¼: post/form-data

å‚æ•°:
key: ä¸Šä¼ åçš„æ–‡ä»¶è·¯å¾„+æ–‡ä»¶å
policy: policy json å­—ç¬¦ä¸²<span class="token punctuation">(</span>base64<span class="token punctuation">)</span>
OSSAccessKeyId: ä¸´æ—¶çš„ accessKeyId
signature: åŸºäºä¸´æ—¶ accessKeyId accessKeySecret è®¡ç®—çš„ç­¾å
x-oss-security-token: sts token
file: è¦ä¸Šä¼ çš„æ–‡ä»¶
</code></pre></div><p>æ€»ç»“: åŸºäº sts å®¢æˆ·ç«¯æ–‡ä»¶ä¸Šä¼  oss, èŠ‚çœäº†æœåŠ¡ç«¯çš„å¸¦å®½æµé‡, å®‰å…¨å¯é , ä¸æ­¢ oss æœåŠ¡, ç»å¤§å¤šæ•°äº‘æœåŠ¡ä¹Ÿéƒ½å¯ä»¥åŸºäº sts çš„æ–¹å¼è¯·æ±‚, å…·ä½“å¯ä»¥ç»“åˆé¡¹ç›®æƒ…å†µçµæ´»é€‰æ‹©.</p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"67c3d059\",\"index.md\":\"0fc9b4bf\",\"article_index.md\":\"4897b16c\",\"article_sts.md\":\"fe168d82\",\"cloud_index.md\":\"76aeea52\",\"cloud_k8s.md\":\"dff0c59b\",\"cloud_rancher.md\":\"15163eb9\",\"language_canvas.md\":\"e98886ed\",\"language_flink.md\":\"b718d048\",\"language_flutter.md\":\"cddf9960\",\"language_index.md\":\"4e7ecc0c\",\"language_jvm.md\":\"5b408b47\",\"language_kafka.md\":\"e7070a2d\",\"language_mongo.md\":\"229902e1\",\"language_node.md\":\"57ab1665\",\"language_python.md\":\"9c833872\",\"language_react.md\":\"0f484f5f\",\"language_redis.md\":\"81bf34cc\",\"language_rocket.md\":\"ad586bd5\",\"language_socketio.md\":\"a461c612\",\"language_typescript.md\":\"65876d8a\",\"language_webpack.md\":\"4fc9d3c8\",\"language_zookeeper.md\":\"3cc93d7a\",\"micro_index.md\":\"e3ed309d\",\"open_elk.md\":\"b9bcc712\",\"open_hadoop.md\":\"260bb8b8\",\"open_hdfs.md\":\"eae54ed3\",\"open_index.md\":\"f170ae0f\",\"open_kong.md\":\"419b66f8\",\"open_mapreduce.md\":\"e97cc088\",\"open_mysql.md\":\"998f0cfc\",\"open_netty.md\":\"ec4c007c\",\"open_proxy.md\":\"2e45b6d9\",\"other_index.md\":\"ae1520dd\",\"other_linux.md\":\"2b6a0393\",\"other_nginx.md\":\"a492be97\",\"other_other.md\":\"79890ff5\",\"other_shell.md\":\"c89d06a9\",\"other_wireshark.md\":\"bcac542c\",\"other_xianyu.md\":\"b575eb41\"}")</script>
    <script type="module" async src="/assets/app.9f9f1749.js"></script>
  </body>
</html>